{% extends 'admin_layout.html' %}


{% block css %}

    <style type="text/css">
        .formCenter {
            width: 50%;
            margin: 0 auto;
            margin-top: 30px;
            margin-bottom: 30px;
            text-align: center;
        }

        #id_admin_gender li {

            display: block;
            float: left;
            padding-right: 10px;
            padding-bottom: 10px;

        }

    </style>


{% endblock %}



{% block content %}
    <!-- Start content-page -->
    <div class="content-page">

        <!-- Start content-bar -->
        <div class="content">

            <div class="container-fluid">

                <div class="row">
                    <div class="col-xl-12">
                        <div class="breadcrumb-holder">
                            <h1 class="main-title float-left">完善信息</h1>
                            <ol class="breadcrumb float-right">
                                <li class="breadcrumb-item"></li>
                                <li class="breadcrumb-item active"></li>
                            </ol>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
                <!-- end row -->
            </div>


        </div>
        <!-- END content-bar -->

        <div class="container " id="cont">
            <div style="padding-top: 20px">

                <h3 class="text-center">已有信息</h3>
                <table border="1" class=" formCenter">

                    <tr>
                        <td>用户名</td>
                        <td><input class="form-control" type="text" disabled="disabled"
                                   value="{{ data_list.username }}"></td>
                        <td>账号类型</td>
                        <td><input class="form-control" type="text" disabled="disabled"
                                   value="{{ data_list.usertype }}"></td>
                    </tr>

                </table>
            </div>

            <div style="padding-top: 50px">

                <h3 class="text-center">待完善信息</h3>
                <form method="post" action="/admin_addinfo/">
                    {% csrf_token %}
                    <table border="1" class=" formCenter">

                        <tr>
                            <td>真实姓名</td>
                            <td>{{ addinfoForm.admin_name }}</td>
                            <td>性别</td>
                            <td>{{ addinfoForm.admin_gender }}</td>
                        </tr>

                        <tr>
                            <td>Email</td>
                            <td>{{ addinfoForm.admin_email }}</td>
                            <td>手机</td>
                            <td>{{ addinfoForm.admin_phone }}</td>
                        </tr>

                    </table>
                    <div class="formCenter">
                        <input class="btn btn-primary" style="margin-bottom: 20px" type="submit" value="提交">


                    </div>

                </form>

                <div class="formCenter">
                    {% if flag %}
                        完善信息成功,<strong id="second_show">5</strong>秒钟后跳转个人信息页面!

                    {% endif %}
                    {{ addinfoForm.admin_name.errors.0 }}
                    {{ addinfoForm.admin_gender.errors.0 }}
                    {{ addinfoForm.admin_email.errors.0 }}
                    {{ addinfoForm.admin_phone.errors.0 }}
                </div>
            </div>

        </div>
        <div class="text-center" style="margin-top: 80px">

            {% if tag %}

                <h3>信息已完善,<strong id="second_show">5</strong>秒钟后跳转个人信息页面!</h3>
                <script>
                    var obj = document.getElementById("cont");
                    obj.parentNode.removeChild(obj);
                </script>

            {% endif %}

        </div>

    </div>
    <!-- END content-page -->

{% endblock %}

{% block js %}
    <script>
        $('#id_admin_gender').attr('style', "width: 100%");
        $('#id_admin_gender').attr('class', "form-control");
    </script>

    <script>
        var timeout = 5;

        function showError() {
            document.getElementById("second_show").innerHTML = timeout;
            timeout--;
            if (timeout == 0) {
                window.location.href = "/admin_profile/";
            } else {
                setTimeout("showError()", 1000);
            }
        }

        showError();
    </script>

{% endblock %}
