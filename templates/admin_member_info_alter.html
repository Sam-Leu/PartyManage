{% extends 'admin_layout.html' %}


{% block css %}

    <style type="text/css">
        .formCenter {
            width: 50%;
            margin: 0 auto;
            margin-top: 10px;
            text-align: center;
        }

        .textCenter {
            margin: 0 auto;
            margin-top: 10px;
            text-align: center;
        }

        .table-space {
            border-collapse: separate;
            border-spacing: 5px 15px; /* 水平间距 垂直间距 */

        }


        select {
            width: 100%;
        }

    </style>


{% endblock %}



{% block content %}
    <!-- Start content-page -->
    <div class="content-page">

        <!-- Start content-bar -->
        <div class="content">

            <div class="container-fluid">

                <div class="row">
                    <div class="col-xl-12">
                        <div class="breadcrumb-holder">
                            <h1 class="main-title float-left">党员信息修改</h1>
                            <ol class="breadcrumb float-right">
                                <li class="breadcrumb-item"></li>
                                <li class="breadcrumb-item active"></li>
                            </ol>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
                <!-- end row -->
            </div>


        </div>
        <!-- END content-bar -->

        <div class="card mb-3 formCenter">
            <div class="card-header">
                <h3><i class="fa fa-user"></i> 党员个人信息</h3>
            </div>

            <div class="card-body ">

                <form method="post" action="/admin_member_info_alter/?mid={{ data_list.member_id }}">
                    {% csrf_token %}
                    <table class="table-space">
                        <tr>
                            <td>用户名</td>
                            <td><input type="text" class="form-control" disabled="disabled"
                                       value="{{ data_list.user_account.username }}"></td>
                            <td>账号类型</td>
                            <td><input type="text" class="form-control" disabled="disabled"
                                       value="{{ data_list.user_account.roles.usertype }}"></td>
                        </tr>
                        <tr>
                            <td>真实姓名</td>
                            <td>{{ memberinfoForm.member_name }}</td>
                            <td>性别</td>
                            <td>{{ memberinfoForm.member_gender }}</td>
                        </tr>

                        <tr>
                            <td>手机</td>
                            <td>{{ memberinfoForm.member_phone }}</td>
                            <td>Email</td>
                            <td>{{ memberinfoForm.member_email }}</td>
                        </tr>

                        <tr>
                            <td>政治面貌</td>
                            <td>{{ memberinfoForm.member_status }}</td>
                            <td>职务</td>
                            <td><input type="text" class="form-control" disabled="disabled"
                                       value="{{ data_list.member_duty }}"></td>
                        </tr>

                        <tr>
                            <td>入党日期</td>
                            <td>{{ memberinfoForm.first_date }}</td>
                            <td>转正日期</td>
                            <td>{{ memberinfoForm.regular_date }}</td>
                        </tr>

                        <tr>
                            <td>志愿时长</td>
                            <td>{{ memberinfoForm.voluntary_time }}</td>
                            <td>转自组织</td>
                            <td>{{ memberinfoForm.come_from_party }}</td>
                        </tr>

                        <tr>
                            <td colspan="4">
                                <small class="formCenter">提示：职务只能由管理员修改组织信息时修改</small>
                            </td>
                        </tr>

                    </table>
                    <div class="formCenter">
                        <input style="margin-bottom: 20px" type="submit" class="btn btn-info" value="提交">
                    </div>
                    <div class="textCenter">

                        <span style="color: red">{{ msg }}</span>
                        <span style="color: red">{{ memberinfoForm.member_name.errors.0 }}</span>
                        <span style="color: red">{{ memberinfoForm.member_phone.errors.0 }}</span>
                        <span style="color: red">{{ memberinfoForm.member_email.errors.0 }}</span>
                        <span style="color: red">{{ memberinfoForm.first_date.errors.0 }}</span>
                        <span style="color: red">{{ memberinfoForm.voluntary_time.errors.0 }}</span>
                    </div>

                </form>
            </div>

        </div>


    </div>
    <!-- END content-page -->

{% endblock %}

{% block js %}

    <script>
        $('#id_member_gender').attr('style', "width: 100%");
        $('#id_member_gender').attr('class', "form-control");

        $('#id_member_status').attr('style', "width: 100%");
        $('#id_member_status').attr('class', "form-control");

        var come = $('#id_come_from_party').val()

        if (come == ''){
            $('#id_come_from_party').attr('placeholder', "无转入操作");
            $('#id_come_from_party').attr('disabled', "disabled");
        }

    </script>

{% endblock %}
