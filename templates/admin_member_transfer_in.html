{% extends 'admin_layout.html' %}

{% block css %}

    <style type="text/css">
        .formCenter {
            width: 50%;
            margin: 0 auto;
            margin-top: 50px;
            text-align: center;
        }
        .textCenter {
            margin: 0 auto;
            margin-bottom: 10px;
            text-align: center;
        }

        .table-space {
            border-collapse: separate;
            border-spacing: 5px 15px; /* 水平间距 垂直间距 */

        }

        td {
            width: 180px;
            display: table-cell;
            text-align: center;
            vertical-align: middle;
        }

        .btn_center {
            margin: 0 auto;
            margin-top: 10px;
        }


    </style>


{% endblock %}

{% block content %}

    <!-- Start content-page -->
    <div class="content-page">

        <!-- Start content-bar -->
        <div class="content">

            <div class="container-fluid">

                <div class="row">
                    <div class="col-xl-12">
                        <div class="breadcrumb-holder">
                            <h1 class="main-title float-left">党员转入</h1>
                            <ol class="breadcrumb float-right">
                                <li class="breadcrumb-item"></li>
                                <li class="breadcrumb-item active"></li>
                            </ol>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
                <!-- end row -->
            </div>

            <div class="form-control">
                党员调动包括党员组织关系转出和转入，当前为党员转入页面<a type="button" href="/admin_member_transfer_out/">点此切换</a>为党员转出页面
            </div>
            <div class="card mb-3 formCenter">
                <div class="card-header">
                    <h3><i class="fa fa-user"></i> 党员转入信息</h3>
                </div>

                <div class="card-body ">

                    <form class="form-inline" method="POST" action="/admin_member_transfer_in/">
                        {% csrf_token %}
                        <table class="table-space">
                            <tbody>
                            <tr>
                                <td><label>用户名</label></td>
                                <td>{{ transferinForm.username }}</td>
                                <td><label>姓名</label></td>
                                <td>{{ transferinForm.member_name }}</td>
                            </tr>

                            <tr>
                                <td><label>性别</label></td>
                                <td>
                                    {{ transferinForm.member_gender }}
                                </td>
                                <td><label>政治面貌</label></td>
                                <td>
                                    {{ transferinForm.member_status }}
                                </td>
                            </tr>

                            <tr>
                                <td><label>转入日期</label></td>
                                <td>{{ transferinForm.in_date }}</td>
                                <td><label>转自组织</label></td>
                                <td>{{ transferinForm.come_from_party }}</td>
                            </tr>

                            <tr>
                                <td colspan="4">
                                    <small class="formCenter">提示：党员转入即生成新账户，用户登陆密码默认设置为用户名</small>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        <div class="btn_center ">
                            <input type="submit" class="btn btn-info" value="提交">

                        </div>

                    </form>
                </div>
                <div class="textCenter ">
                    {% if info.flag == 'ok' %}
                        <span style="color: red">{{ info.name }}转入成功</span>
                    {% elif info.flag == 'exist' %}
                        <span style="color: red">该用户名已存在，{{ info.name }}转入失败</span>
                    {% endif %}
                    {% if transferinForm.username.errors.0 %}
                        <span style="color: red">用户名格式有误,请重新输入</span><br>
                    {% endif %}
                    <span style="color: red">{{ transferinForm.member_name.errors.0 }}</span>
                    <span style="color: red">{{ transferinForm.member_gender.errors.0 }}</span>
                    <span style="color: red">{{ transferinForm.member_status.errors.0 }}</span>
                    <span style="color: red">{{ transferinForm.in_date.errors.0 }}</span>
                    <span style="color: red">{{ transferinForm.come_from_party.errors.0 }}</span>
                </div>

            </div>


        </div>
        <!-- END content-bar -->

        <!-- Start content -->

        <!-- End content -->

    </div>
    <!-- End content-page -->

{% endblock %}

{% block js %}

    <script>
        $('#id_member_gender').attr('style', "width: 100%");
        $('#id_member_gender').attr('class', "form-control");
        $('#id_member_status').attr('style', "width: 100%");
        $('#id_member_status').attr('class', "form-control");
        $('#id_in_date').attr('style', "width: 100%");
    </script>

{% endblock %}